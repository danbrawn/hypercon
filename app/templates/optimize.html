{% extends 'base.html' %}
{% block content %}
<h1>Оптимизация на рецепта</h1>

<div class="mb-3">
  <strong>Схема:</strong> {{ schema }}<br>
  <strong>Таблица:</strong> {{ table_name }}
</div>

<form id="opt-form" action="{{ url_for('optimize_bp.run') }}" method="post">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  <button id="run" type="button" class="btn btn-primary">Стартирай</button>
</form>

<div id="result" class="d-none">
  <h3>Резултат</h3>
  <p id="best-mse"></p>
  <table class="table table-sm" id="weights-table">
    <thead>
      <tr><th>Материал ID</th><th>Тегло %</th></tr>
    </thead>
    <tbody id="weights-body"></tbody>
  </table>
  <canvas id="chart" width="600" height="300"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='optimize.js') }}"></script>

{% endblock %}
